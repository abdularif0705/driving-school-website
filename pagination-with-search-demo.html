<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pagination with Search - Interactive Demo</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            font-size: 1.1em;
            opacity: 0.9;
        }

        .search-section {
            padding: 30px 40px;
            background: #f8f9fa;
            border-bottom: 2px solid #e9ecef;
        }

        .search-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .search-input {
            flex: 1;
            padding: 15px 20px;
            font-size: 16px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .search-btn, .clear-btn {
            padding: 15px 30px;
            font-size: 16px;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }

        .search-btn {
            background: #667eea;
            color: white;
        }

        .search-btn:hover {
            background: #5568d3;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .clear-btn {
            background: #6c757d;
            color: white;
        }

        .clear-btn:hover {
            background: #5a6268;
        }

        .stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 20px;
            background: white;
            border-radius: 10px;
            margin-top: 15px;
        }

        .stats-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stats-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .stats-text {
            font-size: 14px;
            color: #6c757d;
        }

        .stats-number {
            font-size: 20px;
            font-weight: bold;
            color: #333;
        }

        .content-section {
            padding: 40px;
        }

        .blog-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .blog-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            transition: all 0.3s;
            cursor: pointer;
            opacity: 0;
            animation: fadeIn 0.5s forwards;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }

        .blog-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .blog-card.highlight {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .blog-number {
            display: inline-block;
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .blog-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 10px;
            color: #333;
        }

        .blog-description {
            color: #6c757d;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .blog-tags {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .blog-tag {
            background: #e9ecef;
            color: #495057;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 500;
        }

        .blog-tag.match {
            background: #667eea;
            color: white;
        }

        .no-results {
            text-align: center;
            padding: 60px 20px;
            color: #6c757d;
        }

        .no-results-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .no-results h3 {
            font-size: 24px;
            margin-bottom: 10px;
            color: #333;
        }

        .pagination-section {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 30px 0;
            gap: 20px;
            flex-wrap: wrap;
        }

        .pagination-info {
            background: #f8f9fa;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: 600;
            color: #495057;
        }

        .pagination {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .page-btn {
            min-width: 45px;
            height: 45px;
            border: 2px solid #e9ecef;
            background: white;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            color: #495057;
        }

        .page-btn:hover:not(:disabled) {
            border-color: #667eea;
            color: #667eea;
            transform: scale(1.1);
        }

        .page-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-color: transparent;
        }

        .page-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .page-btn.arrow {
            font-size: 18px;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #6c757d;
        }

        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .highlight-text {
            background: yellow;
            padding: 2px 4px;
            border-radius: 3px;
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 1.8em;
            }

            .search-container {
                flex-direction: column;
            }

            .stats {
                flex-direction: column;
                gap: 15px;
            }

            .blog-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Pagination + Search Demo</h1>
            <p>Interactive example showing how search and pagination work together</p>
        </div>

        <div class="search-section">
            <div class="search-container">
                <input 
                    type="text" 
                    class="search-input" 
                    id="searchInput" 
                    placeholder="Search blog posts... (try 'test', 'tips', 'guide')"
                    autocomplete="off"
                >
                <button class="search-btn" id="searchBtn">üîç Search</button>
                <button class="clear-btn" id="clearBtn">‚úï Clear</button>
            </div>

            <div class="stats">
                <div class="stats-item">
                    <div class="stats-icon">üìù</div>
                    <div>
                        <div class="stats-text">Total Posts</div>
                        <div class="stats-number" id="totalPosts">50</div>
                    </div>
                </div>
                <div class="stats-item">
                    <div class="stats-icon">‚úì</div>
                    <div>
                        <div class="stats-text">Showing</div>
                        <div class="stats-number" id="showingPosts">8</div>
                    </div>
                </div>
                <div class="stats-item">
                    <div class="stats-icon">üìÑ</div>
                    <div>
                        <div class="stats-text">Pages</div>
                        <div class="stats-number" id="totalPages">7</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-section">
            <div class="blog-grid" id="blogGrid">
                <!-- Blog posts will be inserted here -->
            </div>

            <div class="pagination-section">
                <div class="pagination-info" id="paginationInfo">
                    Page 1 of 7
                </div>
                <div class="pagination" id="pagination">
                    <!-- Pagination buttons will be inserted here -->
                </div>
            </div>

            <!-- JavaScript Explanation Section -->
            <div style="background: #f8f9fa; padding: 40px; margin-top: 40px; border-radius: 15px; border: 2px solid #e9ecef;">
                <h2 style="color: #667eea; margin-bottom: 30px;">üß† How the JavaScript Works</h2>
                
                <div style="background: white; padding: 25px; border-radius: 10px; margin-bottom: 25px;">
                    <h3 style="color: #333; margin-bottom: 15px;">üì¶ Part 1: The State Object</h3>
                    <pre style="background: #263238; color: #aed581; padding: 20px; border-radius: 8px; overflow-x: auto;"><code>const state = {
    allPosts: [],           // ALL 50 blog posts (never changes)
    filteredPosts: [],      // Posts matching search (changes on search)
    currentPage: 1,         // Which page user is on
    postsPerPage: 8,        // How many posts per page
    searchQuery: '',        // What user searched for
    
    // Computed properties (calculated on-the-fly)
    get totalPages() {
        return Math.ceil(this.filteredPosts.length / this.postsPerPage);
    },
    get startIndex() {
        return (this.currentPage - 1) * this.postsPerPage;
    },
    get currentPosts() {
        return this.filteredPosts.slice(this.startIndex, this.endIndex);
    }
};</code></pre>
                    <p style="margin-top: 15px; color: #6c757d;"><strong>Why this matters:</strong> One central place stores all our data. Any function can check state.currentPage or state.filteredPosts.</p>
                </div>

                <div style="background: white; padding: 25px; border-radius: 10px; margin-bottom: 25px;">
                    <h3 style="color: #333; margin-bottom: 15px;">üîç Part 2: Search Function</h3>
                    <pre style="background: #263238; color: #aed581; padding: 20px; border-radius: 8px; overflow-x: auto;"><code>function performSearch(query) {
    const searchTerm = query.toLowerCase().trim();
    state.searchQuery = searchTerm;
    
    if (!searchTerm) {
        // Empty search = show all posts
        state.filteredPosts = [...state.allPosts];
    } else {
        // Filter posts that match search
        state.filteredPosts = state.allPosts.filter(post => {
            const titleMatch = post.title.toLowerCase().includes(searchTerm);
            const descMatch = post.description.toLowerCase().includes(searchTerm);
            const tagMatch = post.tags.some(tag => 
                tag.toLowerCase().includes(searchTerm)
            );
            
            return titleMatch || descMatch || tagMatch;
        });
    }
    
    // üö® CRITICAL: Always reset to page 1 after search!
    state.currentPage = 1;
    
    updateDisplay();
}</code></pre>
                    <p style="margin-top: 15px; color: #6c757d;"><strong>Example:</strong> User searches "test"<br>
                    ‚Üí Checks all 50 posts<br>
                    ‚Üí Finds 12 matches<br>
                    ‚Üí state.filteredPosts now has 12 posts<br>
                    ‚Üí Resets to page 1<br>
                    ‚Üí Shows first 8 of those 12</p>
                </div>

                <div style="background: white; padding: 25px; border-radius: 10px; margin-bottom: 25px;">
                    <h3 style="color: #333; margin-bottom: 15px;">‚ö° Part 3: Debouncing (Performance Trick)</h3>
                    <pre style="background: #263238; color: #aed581; padding: 20px; border-radius: 8px; overflow-x: auto;"><code>function debounce(func, delay) {
    let timeoutId;
    return function(...args) {
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() => func.apply(this, args), delay);
    };
}

const debouncedSearch = debounce(performSearch, 300);</code></pre>
                    <p style="margin-top: 15px; color: #6c757d;"><strong>What this does:</strong><br>
                    ‚Ä¢ User types: "t" ‚Üí Wait 300ms<br>
                    ‚Ä¢ User types: "e" ‚Üí Cancel previous, wait 300ms<br>
                    ‚Ä¢ User types: "s" ‚Üí Cancel previous, wait 300ms<br>
                    ‚Ä¢ User types: "t" ‚Üí Cancel previous, wait 300ms<br>
                    ‚Ä¢ User stops typing ‚Üí 300ms passes ‚Üí Search for "test"!<br><br>
                    <strong>Result:</strong> Only 1 search instead of 4. Saves CPU and makes it smooth!</p>
                </div>

                <div style="background: white; padding: 25px; border-radius: 10px; margin-bottom: 25px;">
                    <h3 style="color: #333; margin-bottom: 15px;">üé® Part 4: Rendering Posts</h3>
                    <pre style="background: #263238; color: #aed581; padding: 20px; border-radius: 8px; overflow-x: auto;"><code>function renderPosts() {
    const grid = document.getElementById('blogGrid');
    const posts = state.currentPosts; // Get posts for current page
    
    if (posts.length === 0) {
        grid.innerHTML = `&lt;div class="no-results"&gt;No posts found&lt;/div&gt;`;
        return;
    }
    
    // Create HTML for each post
    grid.innerHTML = posts.map((post, index) => {
        return `
            &lt;div class="blog-card" style="animation-delay: ${index * 0.1}s"&gt;
                &lt;div class="blog-number"&gt;${post.id}&lt;/div&gt;
                &lt;div class="blog-title"&gt;${highlightText(post.title, state.searchQuery)}&lt;/div&gt;
                &lt;div class="blog-description"&gt;${highlightText(post.description, state.searchQuery)}&lt;/div&gt;
            &lt;/div&gt;
        `;
    }).join('');
}</code></pre>
                    <p style="margin-top: 15px; color: #6c757d;"><strong>The .map() trick:</strong><br>
                    ‚Ä¢ Takes array of posts: [post1, post2, post3]<br>
                    ‚Ä¢ Transforms to HTML strings: ["&lt;div&gt;...&lt;/div&gt;", "&lt;div&gt;...&lt;/div&gt;"]<br>
                    ‚Ä¢ .join('') combines them into one big HTML string<br>
                    ‚Ä¢ Sets as innerHTML = instant display!</p>
                </div>

                <div style="background: white; padding: 25px; border-radius: 10px; margin-bottom: 25px;">
                    <h3 style="color: #333; margin-bottom: 15px;">üîÜ Part 5: Highlighting Search Terms</h3>
                    <pre style="background: #263238; color: #aed581; padding: 20px; border-radius: 8px; overflow-x: auto;"><code>function highlightText(text, query) {
    if (!query) return text;
    
    // Create regex that finds the search term (case-insensitive)
    const regex = new RegExp(`(${query})`, 'gi');
    
    // Replace matches with highlighted version
    return text.replace(regex, '&lt;span class="highlight-text"&gt;$1&lt;/span&gt;');
}

// Example:
// highlightText("Driving Test Tips", "test")
// Returns: "Driving &lt;span class="highlight-text"&gt;Test&lt;/span&gt; Tips"</code></pre>
                    <p style="margin-top: 15px; color: #6c757d;"><strong>Regex explanation:</strong><br>
                    ‚Ä¢ <code>(${query})</code> ‚Üí Captures the matched word<br>
                    ‚Ä¢ <code>gi</code> ‚Üí Global (all matches) + case Insensitive<br>
                    ‚Ä¢ <code>$1</code> ‚Üí Refers to captured text<br>
                    ‚Ä¢ Result: Yellow highlight around search term!</p>
                </div>

                <div style="background: white; padding: 25px; border-radius: 10px; margin-bottom: 25px;">
                    <h3 style="color: #333; margin-bottom: 15px;">üî¢ Part 6: Smart Pagination with Ellipsis</h3>
                    <pre style="background: #263238; color: #aed581; padding: 20px; border-radius: 8px; overflow-x: auto;"><code>function renderPagination() {
    const { currentPage, totalPages } = state;
    
    // Show max 5 page numbers at once
    const maxVisible = 5;
    let startPage = Math.max(1, currentPage - 2);
    let endPage = Math.min(totalPages, startPage + 4);
    
    // If near end, adjust start
    if (endPage - startPage + 1 < maxVisible) {
        startPage = Math.max(1, endPage - maxVisible + 1);
    }
    
    // Example: Page 9 of 50
    // startPage = 9 - 2 = 7
    // endPage = 7 + 4 = 11
    // Shows: ‚Äπ 1 ... 7 8 [9] 10 11 ... 50 ‚Ä∫
}</code></pre>
                    <p style="margin-top: 15px; color: #6c757d;"><strong>Visual example:</strong><br>
                    <span style="display: inline-block; padding: 10px; background: #f8f9fa; border-radius: 5px; font-family: monospace;">
                        ‚Äπ 1 ... 7 8 <span style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 5px 10px; border-radius: 5px;">9</span> 10 11 ... 50 ‚Ä∫
                    </span><br><br>
                    Instead of overwhelming: 1 2 3 4 5 6 7 8 9 10 11 12 13...</p>
                </div>

                <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); padding: 25px; border-radius: 10px; color: white;">
                    <h3 style="margin-bottom: 15px;">üéØ The Complete Flow</h3>
                    <ol style="line-height: 2;">
                        <li><strong>User types "test"</strong> ‚Üí Debounce waits 300ms</li>
                        <li><strong>performSearch("test")</strong> runs</li>
                        <li>Filters 50 posts ‚Üí 12 match</li>
                        <li>Updates state.filteredPosts = 12 posts</li>
                        <li>Resets state.currentPage = 1</li>
                        <li><strong>updateDisplay()</strong> called</li>
                        <li>renderPosts() shows posts 1-8 with highlights</li>
                        <li>renderPagination() shows "Page 1 of 2"</li>
                        <li>updateStats() shows "Showing 1-8 of 12"</li>
                        <li>User sees results instantly! ‚ö°</li>
                    </ol>
                </div>

                <div style="background: #e8f5e9; padding: 20px; border-radius: 10px; margin-top: 25px; border-left: 5px solid #4CAF50;">
                    <h4 style="color: #2e7d32; margin-bottom: 10px;">‚úÖ Key Takeaways</h4>
                    <ul style="color: #333; line-height: 1.8;">
                        <li><strong>State management:</strong> One object holds all data</li>
                        <li><strong>Separation of concerns:</strong> Search, render, and pagination are separate functions</li>
                        <li><strong>Debouncing:</strong> Improves performance by reducing unnecessary searches</li>
                        <li><strong>Highlighting:</strong> Regex makes search terms visible</li>
                        <li><strong>Ellipsis:</strong> Keeps pagination clean with many pages</li>
                        <li><strong>Computed properties:</strong> state.totalPages calculates automatically</li>
                        <li><strong>Array methods:</strong> filter(), map(), slice() do the heavy lifting</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // DATA GENERATION
        // ============================================
        
        const categories = ['Tips', 'Guide', 'Tutorial', 'Review', 'News'];
        const topics = ['Driving Test', 'Safety', 'License', 'Insurance', 'Maintenance', 
                       'Winter Driving', 'Highway', 'Parking', 'Road Rules', 'Practice'];
        
        // Generate 50 sample blog posts
        const allBlogPosts = Array.from({ length: 50 }, (_, i) => ({
            id: i + 1,
            title: `${topics[i % topics.length]} ${categories[i % categories.length]} #${i + 1}`,
            description: `Learn everything about ${topics[i % topics.length].toLowerCase()} with this comprehensive ${categories[i % categories.length].toLowerCase()}. Essential information for new drivers in Ontario.`,
            tags: [
                categories[i % categories.length],
                topics[i % topics.length],
                i % 2 === 0 ? 'Beginner' : 'Advanced'
            ]
        }));

        // ============================================
        // PAGINATION STATE
        // ============================================
        
        const state = {
            allPosts: allBlogPosts,
            filteredPosts: [...allBlogPosts],
            currentPage: 1,
            postsPerPage: 8,
            searchQuery: '',
            
            get totalPages() {
                return Math.ceil(this.filteredPosts.length / this.postsPerPage);
            },
            
            get startIndex() {
                return (this.currentPage - 1) * this.postsPerPage;
            },
            
            get endIndex() {
                return Math.min(this.startIndex + this.postsPerPage, this.filteredPosts.length);
            },
            
            get currentPosts() {
                return this.filteredPosts.slice(this.startIndex, this.endIndex);
            }
        };

        // ============================================
        // SEARCH FUNCTIONALITY
        // ============================================
        
        function performSearch(query) {
            const searchTerm = query.toLowerCase().trim();
            state.searchQuery = searchTerm;
            
            if (!searchTerm) {
                // No search - show all posts
                state.filteredPosts = [...state.allPosts];
            } else {
                // Filter posts based on search
                state.filteredPosts = state.allPosts.filter(post => {
                    const titleMatch = post.title.toLowerCase().includes(searchTerm);
                    const descMatch = post.description.toLowerCase().includes(searchTerm);
                    const tagMatch = post.tags.some(tag => 
                        tag.toLowerCase().includes(searchTerm)
                    );
                    
                    return titleMatch || descMatch || tagMatch;
                });
            }
            
            // Important: Reset to page 1 after search
            state.currentPage = 1;
            
            // Update display
            updateDisplay();
        }

        // Debounce function for real-time search
        function debounce(func, delay) {
            let timeoutId;
            return function(...args) {
                clearTimeout(timeoutId);
                timeoutId = setTimeout(() => func.apply(this, args), delay);
            };
        }

        const debouncedSearch = debounce((query) => {
            performSearch(query);
        }, 300);

        // ============================================
        // DISPLAY FUNCTIONS
        // ============================================
        
        function highlightText(text, query) {
            if (!query) return text;
            
            const regex = new RegExp(`(${query})`, 'gi');
            return text.replace(regex, '<span class="highlight-text">$1</span>');
        }

        function renderPosts() {
            const grid = document.getElementById('blogGrid');
            const posts = state.currentPosts;
            
            if (posts.length === 0) {
                grid.innerHTML = `
                    <div class="no-results" style="grid-column: 1/-1;">
                        <div class="no-results-icon">üîç</div>
                        <h3>No posts found</h3>
                        <p>Try a different search term or clear your search</p>
                    </div>
                `;
                return;
            }
            
            grid.innerHTML = posts.map((post, index) => {
                const hasMatch = state.searchQuery && (
                    post.title.toLowerCase().includes(state.searchQuery) ||
                    post.description.toLowerCase().includes(state.searchQuery)
                );
                
                return `
                    <div class="blog-card ${hasMatch ? 'highlight' : ''}" style="animation-delay: ${index * 0.1}s">
                        <div class="blog-number">${post.id}</div>
                        <div class="blog-title">${highlightText(post.title, state.searchQuery)}</div>
                        <div class="blog-description">${highlightText(post.description, state.searchQuery)}</div>
                        <div class="blog-tags">
                            ${post.tags.map(tag => {
                                const matches = state.searchQuery && 
                                    tag.toLowerCase().includes(state.searchQuery);
                                return `<span class="blog-tag ${matches ? 'match' : ''}">${tag}</span>`;
                            }).join('')}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function renderPagination() {
            const pagination = document.getElementById('pagination');
            const { currentPage, totalPages } = state;
            
            if (totalPages <= 1) {
                pagination.innerHTML = '';
                return;
            }
            
            let buttons = [];
            
            // Previous button
            buttons.push(`
                <button class="page-btn arrow" 
                        onclick="goToPage(${currentPage - 1})"
                        ${currentPage === 1 ? 'disabled' : ''}>
                    ‚Äπ
                </button>
            `);
            
            // Page numbers with smart ellipsis
            const maxVisible = 5;
            let startPage = Math.max(1, currentPage - Math.floor(maxVisible / 2));
            let endPage = Math.min(totalPages, startPage + maxVisible - 1);
            
            if (endPage - startPage + 1 < maxVisible) {
                startPage = Math.max(1, endPage - maxVisible + 1);
            }
            
            // First page
            if (startPage > 1) {
                buttons.push(`
                    <button class="page-btn" onclick="goToPage(1)">1</button>
                `);
                if (startPage > 2) {
                    buttons.push(`<span style="padding: 0 5px;">...</span>`);
                }
            }
            
            // Page numbers
            for (let i = startPage; i <= endPage; i++) {
                buttons.push(`
                    <button class="page-btn ${i === currentPage ? 'active' : ''}" 
                            onclick="goToPage(${i})"
                            ${i === currentPage ? 'disabled' : ''}>
                        ${i}
                    </button>
                `);
            }
            
            // Last page
            if (endPage < totalPages) {
                if (endPage < totalPages - 1) {
                    buttons.push(`<span style="padding: 0 5px;">...</span>`);
                }
                buttons.push(`
                    <button class="page-btn" onclick="goToPage(${totalPages})">${totalPages}</button>
                `);
            }
            
            // Next button
            buttons.push(`
                <button class="page-btn arrow" 
                        onclick="goToPage(${currentPage + 1})"
                        ${currentPage === totalPages ? 'disabled' : ''}>
                    ‚Ä∫
                </button>
            `);
            
            pagination.innerHTML = buttons.join('');
        }

        function updateStats() {
            document.getElementById('totalPosts').textContent = state.filteredPosts.length;
            document.getElementById('showingPosts').textContent = 
                `${Math.min(state.startIndex + 1, state.filteredPosts.length)}-${state.endIndex}`;
            document.getElementById('totalPages').textContent = state.totalPages || 0;
            
            const info = document.getElementById('paginationInfo');
            if (state.totalPages === 0) {
                info.textContent = 'No results';
            } else {
                info.textContent = `Page ${state.currentPage} of ${state.totalPages}`;
            }
        }

        function updateDisplay() {
            renderPosts();
            renderPagination();
            updateStats();
            
            // Scroll to top of content
            document.querySelector('.content-section').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        // ============================================
        // NAVIGATION
        // ============================================
        
        function goToPage(pageNum) {
            if (pageNum < 1 || pageNum > state.totalPages) return;
            state.currentPage = pageNum;
            updateDisplay();
        }

        // ============================================
        // EVENT LISTENERS
        // ============================================
        
        document.getElementById('searchInput').addEventListener('input', (e) => {
            debouncedSearch(e.target.value);
        });

        document.getElementById('searchBtn').addEventListener('click', () => {
            const query = document.getElementById('searchInput').value;
            performSearch(query);
        });

        document.getElementById('clearBtn').addEventListener('click', () => {
            document.getElementById('searchInput').value = '';
            performSearch('');
        });

        document.getElementById('searchInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                performSearch(e.target.value);
            }
        });

        // ============================================
        // INITIALIZATION
        // ============================================
        
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ Pagination + Search Demo loaded!');
            console.log(`üìù Total posts: ${state.allPosts.length}`);
            console.log(`üìÑ Posts per page: ${state.postsPerPage}`);
            console.log(`üìä Total pages: ${state.totalPages}`);
            
            updateDisplay();
            
            // Show helpful console commands
            console.log('\nüéÆ Try these commands:');
            console.log('  goToPage(3)           - Go to page 3');
            console.log('  performSearch("test") - Search for "test"');
            console.log('  state.filteredPosts   - See filtered posts');
        });
    </script>
</body>
</html>

